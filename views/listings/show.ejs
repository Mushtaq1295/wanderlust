<% layout("layouts/boilerplate") %>
<div class="row mt-3">
    <h3 class="titletag">Details of <%= listing.title %></h3>
    <div class="col-8 offset-2">
        
    </div>
    <div class="card col-12 d-flex flex-row align-items-start">
        <img src="<%= listing.image.url %>" class="card-img-top show-img" alt="listing_image">
         <!-- Content Section -->
         <div class="show-content ms-4">
            <ul>
                <li><strong>Title:</strong> <%= listing.title %></li>
                <li><strong>Description:</strong> <%= listing.description %></li>
                <li><strong>Price:</strong> &#8377;<%= listing.price.toLocaleString("EN-IN") %></li>
                <li><strong>Location:</strong> <%= listing.location %></li>
                <li><strong>Country:</strong> <%= listing.country %></li>
            </ul>
            <div class="btn-group">
                <a href="/listings/<%= listing._id %>/edit" class="btn edit-btn">Edit</a>
                <form id="delete-form" method="POST" action="/listings/<%= listing._id %>?_method=DELETE">
                    <button type="button" class="btn delete-btn" onclick="confirmDelete()">Delete</button>
                </form>
            </div>
        </div>
    </div>

       
</div>
    

    <script>
        function confirmDelete() {
            // Show confirmation box
            const isConfirmed = confirm("Are you sure you want to delete this listing?");
            
            // If user clicks "OK", submit the form to delete
            if (isConfirmed) {
                document.getElementById("delete-form").submit();
            } else {
                // If user clicks "Cancel", do nothing (listing stays there)
                console.log("Listing was not deleted.");
            }
        }
    </script>
